<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABC êµì‚¬ ìƒë‹´ ë„êµ¬ - ì™„ì „í•œ ë²„ì „</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ì´ë¯¸ì§€/PDF ì €ì¥ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        /* ì„ íƒëœ ê³ ë¯¼ í‘œì‹œ ì¹´ë“œ */
        .selected-worry-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(14, 165, 233, 0.1);
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-10px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .worry-summary {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .worry-icon {
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .worry-content {
            flex: 1;
        }

        .worry-title {
            font-weight: 600;
            color: #0c4a6e;
            margin-bottom: 4px;
            font-size: 0.95rem;
        }

        .worry-text {
            color: #374151;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .worry-category-badge {
            display: inline-block;
            background: rgba(14, 165, 233, 0.1);
            color: #0c4a6e;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-top: 4px;
        }

        /* ê²°ê³¼ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 0;
            margin: 20px auto;
            max-width: 800px;
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
            overflow: hidden;
            position: relative;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3, #54a0ff);
        }

        .result-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .result-content {
            background: white;
            padding: 30px;
            margin: 0;
        }

        .result-title {
            color: white;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .result-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            font-weight: 400;
        }

        /* ë‚´ë³´ë‚´ê¸° ë²„íŠ¼ë“¤ */
        .export-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .export-btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 160px;
            justify-content: center;
        }

        .export-btn:hover {
            transform: translateY(-2px);
        }

        .image-btn {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .image-btn:hover {
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .pdf-btn {
            background: linear-gradient(135deg, #ef4444, #f87171);
            color: white;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }

        .pdf-btn:hover {
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
        }

        .print-btn {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .print-btn:hover {
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }

        .text-btn {
            background: linear-gradient(135deg, #64748b, #94a3b8);
            color: white;
            box-shadow: 0 4px 15px rgba(100, 116, 139, 0.3);
        }

        .text-btn:hover {
            box-shadow: 0 8px 25px rgba(100, 116, 139, 0.4);
        }

        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .loading-spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ë“¤ */
        :root {
            --color-stage1: #d1fae5;
            --color-stage1-dark: #065f46;
            --color-stage2: #dbeafe;
            --color-stage2-dark: #1e40af;
            --color-stage3: #ede9fe;
            --color-stage3-dark: #5b21b6;
            --color-stage4: #ffedd5;
            --color-stage4-dark: #9a3412;
            --color-stage5: #fef3c7;
            --color-stage5-dark: #92400e;
            --color-stage6: #f3e8ff;
            --color-stage6-dark: #6b21a8;
        }
        
        .step-card {
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .step-card.active {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
        }
        
        .step-nav {
            display: flex;
            justify-content: space-between;
            margin-bottom: 24px;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .step-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px 8px;
            text-align: center;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-size: 0.85rem;
            position: relative;
            overflow: hidden;
        }
        
        .step-btn.active {
            transform: translateY(-4px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        
        .step-btn.completed {
            opacity: 0.9;
        }
        
        .step-btn.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .step1-btn { 
            background: linear-gradient(135deg, var(--color-stage1) 0%, #a7f3d0 100%); 
            color: var(--color-stage1-dark); 
        }
        .step1-btn.active { border-color: #059669; }
        
        .step2-btn { 
            background: linear-gradient(135deg, var(--color-stage2) 0%, #93c5fd 100%); 
            color: var(--color-stage2-dark); 
        }
        .step2-btn.active { border-color: #3b82f6; }
        
        .step3-btn { 
            background: linear-gradient(135deg, var(--color-stage3) 0%, #c4b5fd 100%); 
            color: var(--color-stage3-dark); 
        }
        .step3-btn.active { border-color: #8b5cf6; }
        
        .step4-btn { 
            background: linear-gradient(135deg, var(--color-stage4) 0%, #fed7aa 100%); 
            color: var(--color-stage4-dark); 
        }
        .step4-btn.active { border-color: #f97316; }
        
        .step5-btn { 
            background: linear-gradient(135deg, var(--color-stage5) 0%, #fde68a 100%); 
            color: var(--color-stage5-dark); 
        }
        .step5-btn.active { border-color: #f59e0b; }
        
        .step6-btn { 
            background: linear-gradient(135deg, var(--color-stage6) 0%, #e9d5ff 100%); 
            color: var(--color-stage6-dark); 
        }
        .step6-btn.active { border-color: #8b5cf6; }

        /* ì¸ì‡„ ì „ìš© ìŠ¤íƒ€ì¼ */
        @media print {
            body {
                background: white !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            
            .export-buttons,
            .notification,
            .step-nav,
            .help-btn {
                display: none !important;
            }
            
            .result-card {
                box-shadow: none !important;
                page-break-inside: avoid;
                max-width: none !important;
                margin: 0 !important;
            }
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .step-nav {
                flex-direction: column;
                gap: 4px;
            }
            
            .step-btn {
                font-size: 0.8rem;
                padding: 10px 8px;
                min-width: auto;
            }

            .worry-summary {
                flex-direction: column;
                gap: 8px;
            }

            .worry-icon {
                align-self: flex-start;
            }

            .result-card {
                margin: 10px;
                border-radius: 16px;
            }
            
            .result-header {
                padding: 20px;
            }
            
            .result-content {
                padding: 20px;
            }
            
            .result-title {
                font-size: 1.5rem;
            }
            
            .export-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .export-btn {
                width: 100%;
                max-width: 300px;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1000;
            max-width: 300px;
        }
        
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification.error {
            background: linear-gradient(135deg, #ef4444, #f87171);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- í—¤ë” -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">ğŸŒŸ ABC êµì‚¬ ìƒë‹´ ë„êµ¬</h1>
            <p class="text-lg text-gray-600">í•™ìƒì´ ì„ ìƒë‹˜ì˜ ê³ ë¯¼ì„ ë“£ê³  ì¡°ì–¸í•˜ë©° í•¨ê»˜ í•´ê²°ì±…ì„ ì°¾ëŠ” ë˜ë˜ ìƒë‹´ ì„œë¹„ìŠ¤</p>
            <div class="mt-3 text-sm bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 inline-block px-4 py-2 rounded-full border border-blue-200">
                âœ¨ ì™„ì „í•œ ë²„ì „: ê³ ë¯¼ ì§€ì† í‘œì‹œ + ì´ë¯¸ì§€/PDF ì €ì¥ ê¸°ëŠ¥
            </div>
        </div>

        <!-- ì„ íƒëœ ê³ ë¯¼ ìš”ì•½ ì¹´ë“œ - ë°ëª¨ìš©ìœ¼ë¡œ í‘œì‹œ -->
        <div id="selectedWorryCard" class="selected-worry-card">
            <div class="worry-summary">
                <div class="worry-icon">ğŸ“</div>
                <div class="worry-content">
                    <div class="worry-title">ì„ íƒí•˜ì‹  ê³ ë¯¼</div>
                    <div class="worry-text" id="worryDisplayText">í•™ìƒë“¤ì´ ìˆ˜ì—… ì‹œê°„ì— ì§‘ì¤‘í•˜ì§€ ì•Šì•„ìš”</div>
                    <div class="worry-category-badge" id="worryDisplayCategory">ìˆ˜ì—… ì°¸ì—¬</div>
                </div>
            </div>
        </div>

        <!-- ë‹¨ê³„ë³„ ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav class="step-nav">
            <button class="step-btn step1-btn completed" data-step="1">
                1ï¸âƒ£ ê¸°ë³¸ì •ë³´<br>
                <span class="text-xs opacity-75">ì´ë¦„ ì…ë ¥</span>
            </button>
            <button class="step-btn step2-btn completed" data-step="2">
                2ï¸âƒ£ ê³ ë¯¼ì„ íƒ<br>
                <span class="text-xs opacity-75">ìƒí™© íŒŒì•…</span>
            </button>
            <button class="step-btn step3-btn completed" data-step="3">
                3ï¸âƒ£ ABCì •ë¦¬<br>
                <span class="text-xs opacity-75">êµ¬ì¡°ì  ë¶„ì„</span>
            </button>
            <button class="step-btn step4-btn completed" data-step="4">
                4ï¸âƒ£ ê°ì •ê³µê°<br>
                <span class="text-xs opacity-75">ë§ˆìŒ ì´í•´</span>
            </button>
            <button class="step-btn step5-btn completed" data-step="5">
                5ï¸âƒ£ í•™ìƒì¡°ì–¸<br>
                <span class="text-xs opacity-75">ê²½í—˜ ê³µìœ </span>
            </button>
            <button class="step-btn step6-btn active" data-step="6">
                6ï¸âƒ£ ê²©ë ¤ì™„ì„±<br>
                <span class="text-xs opacity-75">ì‘ì› ë©”ì‹œì§€</span>
            </button>
        </nav>

        <!-- ì™„ë£Œ ë©”ì‹œì§€ -->
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-2">ğŸ‰ ìƒë‹´ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
            <p class="text-gray-600">ê²°ê³¼ë¥¼ ì´ë¯¸ì§€, PDF, í…ìŠ¤íŠ¸ë¡œ ì €ì¥í•˜ê±°ë‚˜ ì¸ì‡„í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <!-- ë‚´ë³´ë‚´ê¸° ë²„íŠ¼ë“¤ -->
        <div class="export-buttons">
            <button class="export-btn image-btn" onclick="downloadAsImage()">
                <span class="loading-spinner" id="imageSpinner"></span>
                <span id="imageText">ğŸ“· ì´ë¯¸ì§€ë¡œ ì €ì¥</span>
            </button>
            <button class="export-btn pdf-btn" onclick="downloadAsPDF()">
                <span class="loading-spinner" id="pdfSpinner"></span>
                <span id="pdfText">ğŸ“„ PDFë¡œ ì €ì¥</span>
            </button>
            <button class="export-btn print-btn" onclick="printResult()">
                ğŸ–¨ï¸ ì¸ì‡„í•˜ê¸°
            </button>
            <button class="export-btn text-btn" onclick="downloadAsText()">
                ğŸ“ í…ìŠ¤íŠ¸ë¡œ ì €ì¥
            </button>
        </div>

        <!-- ìƒë‹´ ê²°ê³¼ ì¹´ë“œ -->
        <div class="result-card" id="resultCard">
            <!-- í—¤ë” -->
            <div class="result-header">
                <div class="result-title">ğŸŒŸ ABC êµì‚¬ ìƒë‹´ ê²°ê³¼</div>
                <div class="result-subtitle" id="resultSubtitle">ê¹€ë¯¼ìˆ˜ í•™ìƒì´ ì´ì˜í¬ ì„ ìƒë‹˜ì„ ìœ„í•œ ë”°ëœ»í•œ ì¡°ì–¸</div>
                <div class="text-white text-sm mt-2 opacity-75" id="resultDate"></div>
            </div>

            <!-- ë‚´ìš© -->
            <div class="result-content">
                <!-- ê¸°ë³¸ ì •ë³´ -->
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                    <div class="bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-4">
                        <div class="text-green-600 font-semibold text-sm mb-2">ğŸ‘¦ ìƒë‹´ í•™ìƒ</div>
                        <div class="text-gray-800 font-medium" id="studentNameDisplay">ê¹€ë¯¼ìˆ˜</div>
                    </div>
                    <div class="bg-gradient-to-br from-blue-50 to-sky-50 border-2 border-blue-200 rounded-xl p-4">
                        <div class="text-blue-600 font-semibold text-sm mb-2">ğŸ‘©â€ğŸ« ìƒë‹´ ëŒ€ìƒ</div>
                        <div class="text-gray-800 font-medium" id="teacherNameDisplay">ì´ì˜í¬ ì„ ìƒë‹˜</div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-violet-50 border-2 border-purple-200 rounded-xl p-4">
                        <div class="text-purple-600 font-semibold text-sm mb-2">ğŸ“‚ ê³ ë¯¼ ë¶„ì•¼</div>
                        <div class="text-gray-800 font-medium" id="categoryDisplay">ìˆ˜ì—… ì°¸ì—¬</div>
                    </div>
                    <div class="bg-gradient-to-br from-pink-50 to-rose-50 border-2 border-pink-200 rounded-xl p-4">
                        <div class="text-pink-600 font-semibold text-sm mb-2">ğŸ’– ì„ íƒí•œ ê°ì •</div>
                        <div class="text-gray-800 font-medium" id="emotionDisplay">ğŸ˜¢ ì†ìƒí•¨</div>
                    </div>
                </div>

                <!-- ê³ ë¯¼ ìƒí™© -->
                <div class="bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-xl p-6 mb-6">
                    <div class="text-xl font-bold text-amber-700 mb-3 flex items-center gap-2">
                        ğŸ“ ê³ ë¯¼ ìƒí™©
                    </div>
                    <div class="text-gray-700 leading-relaxed" id="worryContent">
                        í•™ìƒë“¤ì´ ìˆ˜ì—… ì‹œê°„ì— ì§‘ì¤‘í•˜ì§€ ì•Šì•„ì„œ ì†ìƒí•´ìš”. ê²Œì„ì´ë‚˜ í™œë™ì„ í•´ë„ ë°˜ì‘ì´ ë³„ë¡œê³ , ì§ˆë¬¸ì„ í•´ë„ ëŒ€ë‹µí•˜ëŠ” í•™ìƒì´ ê±°ì˜ ì—†ì–´ìš”.
                    </div>
                </div>

                <!-- ABC ë¶„ì„ -->
                <div class="grid md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-gradient-to-br from-red-50 to-rose-50 border-2 border-red-300 rounded-xl p-5">
                        <div class="text-red-600 font-bold text-lg mb-2">ğŸ…°ï¸ ì‚¬ì‹¤ (Facts)</div>
                        <div class="text-gray-700" id="factDisplay">ìˆ˜ì—… ì¤‘ í•™ìƒë“¤ì´ ë”´ì§“ì„ í•˜ê±°ë‚˜ ë– ë“¤ì—ˆë‹¤</div>
                    </div>
                    <div class="bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-300 rounded-xl p-5">
                        <div class="text-orange-600 font-bold text-lg mb-2">ğŸ…±ï¸ ìƒê° (Beliefs)</div>
                        <div class="text-gray-700" id="beliefDisplay">ë‚´ ìˆ˜ì—…ì´ ì¬ë¯¸ì—†ë‚˜ë³´ë‹¤</div>
                    </div>
                    <div class="bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-300 rounded-xl p-5">
                        <div class="text-blue-600 font-bold text-lg mb-2">ğŸ…²ï¸ ê²°ê³¼ (Consequences)</div>
                        <div class="text-gray-700" id="consequenceDisplay">ì†ìƒí•˜ê³  ìì‹ ê°ì´ ë–¨ì–´ì§„ë‹¤</div>
                    </div>
                </div>

                <!-- í•™ìƒì˜ ì¡°ì–¸ -->
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-6 mb-6">
                    <div class="text-xl font-bold text-blue-700 mb-4 flex items-center gap-2">
                        ğŸ¯ í•™ìƒì˜ ì¡°ì–¸
                    </div>
                    <div>
                        <div class="mb-4">
                            <h4 class="font-semibold mb-2 text-blue-600">ğŸ’­ ìƒê°í•´ë³¼ ì :</h4>
                            <p class="text-gray-700 leading-relaxed" id="thinkingAdviceDisplay">ì œê°€ ì¬ë¯¸ìˆê²Œ ëŠê¼ˆë˜ ìˆ˜ì—…ì€ ê²Œì„ì´ë‚˜ í™œë™ì´ ìˆì—ˆì–´ìš”. ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ í•˜ëŠ” í™œë™ì´ ë” ì°¸ì—¬í•˜ê³  ì‹¶ê²Œ ë§Œë“¤ì–´ìš”. ì„ ìƒë‹˜ì´ ì›ƒìœ¼ë©´ì„œ ê²©ë ¤í•´ì£¼ì‹œë©´ ìš©ê¸°ê°€ ë‚˜ìš”.</p>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2 text-blue-600">ğŸ¯ ì‹œë„í•´ë³¼ ë°©ë²•:</h4>
                            <div class="text-gray-700 leading-relaxed" id="helpAdviceDisplay">
                                1) ì†ë“¤ê¸° ì „ì— ì§ê³¼ ë¨¼ì € ì´ì•¼ê¸°í•´ë³´ëŠ” ì‹œê°„ ì£¼ê¸°<br>
                                2) ì •ë‹µì´ ì•„ë‹ˆì–´ë„ ì¹­ì°¬í•´ì£¼ëŠ” ë¶„ìœ„ê¸° ë§Œë“¤ê¸°<br>
                                3) ì¡°ë³„ í™œë™ìœ¼ë¡œ ë¶€ë‹´ ì¤„ì—¬ì£¼ê¸°
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ê²©ë ¤ ë©”ì‹œì§€ -->
                <div class="bg-gradient-to-r from-pink-50 to-purple-50 border-2 border-pink-300 rounded-xl p-6 mb-6 text-center">
                    <div class="text-xl font-bold text-purple-700 mb-3 flex items-center justify-center gap-2">
                        ğŸ’Œ ê²©ë ¤ ë©”ì‹œì§€
                    </div>
                    <div class="text-lg italic text-gray-700 font-medium" id="encouragementDisplay">
                        "ì„ ìƒë‹˜ì˜ ê³ ë¯¼í•˜ëŠ” ë§ˆìŒ ìì²´ê°€ í•™ìƒë“¤ì— ëŒ€í•œ ì‚¬ë‘ì´ì—ìš”! ğŸ’–"
                    </div>
                </div>

                <!-- ê°œì¸ ë©”ì‹œì§€ -->
                <div class="bg-gradient-to-r from-green-50 to-teal-50 border-2 border-green-300 rounded-xl p-6 mb-6">
                    <div class="text-lg font-bold text-green-700 mb-3">âœï¸ ê°œì¸ ë©”ì‹œì§€</div>
                    <div class="text-gray-700 leading-relaxed" id="personalMessageDisplay">
                        ì„ ìƒë‹˜, í•­ìƒ ì €í¬ë¥¼ ìƒê°í•´ì£¼ì…”ì„œ ê°ì‚¬í•´ìš”. í˜ë“¤ ë•ŒëŠ” ì €í¬ì—ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”. í•¨ê»˜ í•´ê²°í•´ë‚˜ê°€ìš”!
                    </div>
                </div>

                <!-- ì‹¤ì²œ ì•½ì† -->
                <div class="bg-gradient-to-r from-violet-50 to-purple-50 border-2 border-violet-300 rounded-xl p-6">
                    <div class="text-xl font-bold text-violet-700 mb-4 flex items-center gap-2">
                        ğŸ¤ ìš°ë¦¬ì˜ ì•½ì†
                    </div>
                    <div class="space-y-3" id="commitmentsList">
                        <div class="flex items-center gap-3 bg-white bg-opacity-60 p-3 rounded-lg">
                            <span class="text-green-500 text-lg">âœ…</span>
                            <span class="text-gray-700">ìš°ë¦¬ê°€ ë” ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•˜ë„ë¡ ë…¸ë ¥í• ê²Œìš”</span>
                        </div>
                        <div class="flex items-center gap-3 bg-white bg-opacity-60 p-3 rounded-lg">
                            <span class="text-green-500 text-lg">âœ…</span>
                            <span class="text-gray-700">ìˆ˜ì—… ì‹œê°„ì— ë” ì§‘ì¤‘í•˜ë„ë¡ í• ê²Œìš”</span>
                        </div>
                        <div class="flex items-center gap-3 bg-white bg-opacity-60 p-3 rounded-lg">
                            <span class="text-green-500 text-lg">âœ…</span>
                            <span class="text-gray-700">ì„ ìƒë‹˜ê»˜ ê°ì‚¬í•œ ë§ˆìŒì„ ìì£¼ í‘œí˜„í• ê²Œìš”</span>
                        </div>
                    </div>
                </div>

                <!-- í‘¸í„° -->
                <div class="text-center mt-8 pt-6 border-t border-gray-200">
                    <div class="text-sm text-gray-500">
                        Made with â¤ï¸ by ABC êµì‚¬ ìƒë‹´ ë„êµ¬
                    </div>
                    <div class="text-xs text-gray-400 mt-1">
                        êµì‚¬ì™€ í•™ìƒì´ ì„œë¡œì˜ ë§ˆìŒì„ ì´í•´í•˜ëŠ” ë”°ëœ»í•œ êµì‹¤ì„ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤
                    </div>
                </div>
            </div>
        </div>

        <!-- ìƒˆë¡œ ì‹œì‘í•˜ê¸° -->
        <div class="text-center mt-8">
            <button onclick="resetForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                ğŸ”„ ìƒˆë¡œìš´ ìƒë‹´ ì‹œì‘í•˜ê¸°
            </button>
        </div>
    </div>

    <!-- ì•Œë¦¼ ì‹œìŠ¤í…œ -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
    </div>

    <!-- ë„ì›€ë§ ë²„íŠ¼ -->
    <button onclick="showHelp()" class="help-btn fixed bottom-4 right-4 bg-indigo-500 hover:bg-indigo-600 text-white p-4 rounded-full shadow-lg transition-colors z-50">
        â“
    </button>

    <script>
        // ìƒ˜í”Œ ë°ì´í„°
        const counselingData = {
            studentName: "ê¹€ë¯¼ìˆ˜",
            teacherName: "ì´ì˜í¬ ì„ ìƒë‹˜",
            category: "ìˆ˜ì—… ì°¸ì—¬",
            emotion: "ğŸ˜¢ ì†ìƒí•¨",
            worry: "í•™ìƒë“¤ì´ ìˆ˜ì—… ì‹œê°„ì— ì§‘ì¤‘í•˜ì§€ ì•Šì•„ì„œ ì†ìƒí•´ìš”. ê²Œì„ì´ë‚˜ í™œë™ì„ í•´ë„ ë°˜ì‘ì´ ë³„ë¡œê³ , ì§ˆë¬¸ì„ í•´ë„ ëŒ€ë‹µí•˜ëŠ” í•™ìƒì´ ê±°ì˜ ì—†ì–´ìš”.",
            abc: {
                fact: "ìˆ˜ì—… ì¤‘ í•™ìƒë“¤ì´ ë”´ì§“ì„ í•˜ê±°ë‚˜ ë– ë“¤ì—ˆë‹¤",
                belief: "ë‚´ ìˆ˜ì—…ì´ ì¬ë¯¸ì—†ë‚˜ë³´ë‹¤",
                consequence: "ì†ìƒí•˜ê³  ìì‹ ê°ì´ ë–¨ì–´ì§„ë‹¤"
            },
            advice: {
                thinking: "ì œê°€ ì¬ë¯¸ìˆê²Œ ëŠê¼ˆë˜ ìˆ˜ì—…ì€ ê²Œì„ì´ë‚˜ í™œë™ì´ ìˆì—ˆì–´ìš”. ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ í•˜ëŠ” í™œë™ì´ ë” ì°¸ì—¬í•˜ê³  ì‹¶ê²Œ ë§Œë“¤ì–´ìš”. ì„ ìƒë‹˜ì´ ì›ƒìœ¼ë©´ì„œ ê²©ë ¤í•´ì£¼ì‹œë©´ ìš©ê¸°ê°€ ë‚˜ìš”.",
                help: "1) ì†ë“¤ê¸° ì „ì— ì§ê³¼ ë¨¼ì € ì´ì•¼ê¸°í•´ë³´ëŠ” ì‹œê°„ ì£¼ê¸°\n2) ì •ë‹µì´ ì•„ë‹ˆì–´ë„ ì¹­ì°¬í•´ì£¼ëŠ” ë¶„ìœ„ê¸° ë§Œë“¤ê¸°\n3) ì¡°ë³„ í™œë™ìœ¼ë¡œ ë¶€ë‹´ ì¤„ì—¬ì£¼ê¸°"
            },
            encouragement: "ì„ ìƒë‹˜ì˜ ê³ ë¯¼í•˜ëŠ” ë§ˆìŒ ìì²´ê°€ í•™ìƒë“¤ì— ëŒ€í•œ ì‚¬ë‘ì´ì—ìš”! ğŸ’–",
            personalMessage: "ì„ ìƒë‹˜, í•­ìƒ ì €í¬ë¥¼ ìƒê°í•´ì£¼ì…”ì„œ ê°ì‚¬í•´ìš”. í˜ë“¤ ë•ŒëŠ” ì €í¬ì—ê²Œ ë§ì”€í•´ì£¼ì„¸ìš”. í•¨ê»˜ í•´ê²°í•´ë‚˜ê°€ìš”!",
            commitments: [
                "ìš°ë¦¬ê°€ ë” ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•˜ë„ë¡ ë…¸ë ¥í• ê²Œìš”",
                "ìˆ˜ì—… ì‹œê°„ì— ë” ì§‘ì¤‘í•˜ë„ë¡ í• ê²Œìš”",
                "ì„ ìƒë‹˜ê»˜ ê°ì‚¬í•œ ë§ˆìŒì„ ìì£¼ í‘œí˜„í• ê²Œìš”"
            ]
        };

        // ì•Œë¦¼ í‘œì‹œ í•¨ìˆ˜
        function showNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notificationText');
            
            text.textContent = message;
            notification.classList.toggle('error', isError);
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // ë¡œë”© ìƒíƒœ ê´€ë¦¬
        function setLoading(type, isLoading) {
            const spinner = document.getElementById(`${type}Spinner`);
            const text = document.getElementById(`${type}Text`);
            
            if (isLoading) {
                spinner.style.display = 'block';
                text.style.display = 'none';
            } else {
                spinner.style.display = 'none';
                text.style.display = 'block';
            }
        }

        // ì´ë¯¸ì§€ë¡œ ì €ì¥
        async function downloadAsImage() {
            try {
                setLoading('image', true);
                
                const resultCard = document.getElementById('resultCard');
                const canvas = await html2canvas(resultCard, {
                    scale: 2, // ê³ í•´ìƒë„
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: null,
                    logging: false,
                    width: resultCard.offsetWidth,
                    height: resultCard.offsetHeight
                });
                
                // ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
                const link = document.createElement('a');
                link.download = `ABCìƒë‹´ê²°ê³¼_${counselingData.studentName}_${new Date().toLocaleDateString('ko-KR')}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                
                showNotification('ğŸ“· ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                
            } catch (error) {
                console.error('ì´ë¯¸ì§€ ì €ì¥ ì˜¤ë¥˜:', error);
                showNotification('âŒ ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', true);
            } finally {
                setLoading('image', false);
            }
        }

        // PDFë¡œ ì €ì¥
        async function downloadAsPDF() {
            try {
                setLoading('pdf', true);
                
                const resultCard = document.getElementById('resultCard');
                const canvas = await html2canvas(resultCard, {
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#ffffff',
                    logging: false
                });
                
                const imgData = canvas.toDataURL('image/png');
                const { jsPDF } = window.jspdf;
                
                // PDF ìƒì„± (A4 ì‚¬ì´ì¦ˆ)
                const pdf = new jsPDF('p', 'mm', 'a4');
                const imgWidth = 210; // A4 width
                const pageHeight = 295; // A4 height
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                let heightLeft = imgHeight;
                
                let position = 0;
                
                // ì²« í˜ì´ì§€
                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
                
                // ì—¬ëŸ¬ í˜ì´ì§€ ì²˜ë¦¬
                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }
                
                // PDF ì €ì¥
                const fileName = `ABCìƒë‹´ê²°ê³¼_${counselingData.studentName}_${new Date().toLocaleDateString('ko-KR')}.pdf`;
                pdf.save(fileName);
                
                showNotification('ğŸ“„ PDFê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                
            } catch (error) {
                console.error('PDF ì €ì¥ ì˜¤ë¥˜:', error);
                showNotification('âŒ PDF ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', true);
            } finally {
                setLoading('pdf', false);
            }
        }

        // ì¸ì‡„í•˜ê¸°
        function printResult() {
            window.print();
            showNotification('ğŸ–¨ï¸ ì¸ì‡„ ì°½ì´ ì—´ë ¸ìŠµë‹ˆë‹¤.');
        }

        // í…ìŠ¤íŠ¸ë¡œ ì €ì¥
        function downloadAsText() {
            const date = new Date().toLocaleDateString('ko-KR');
            
            let content = `ABC êµì‚¬ ìƒë‹´ ê²°ê³¼\n`;
            content += `==========================================\n\n`;
            content += `ìƒë‹´ì¼: ${date}\n`;
            content += `ìƒë‹´ í•™ìƒ: ${counselingData.studentName}\n`;
            content += `ìƒë‹´ ëŒ€ìƒ: ${counselingData.teacherName}\n\n`;
            
            content += `[ê³ ë¯¼ ë¶„ì•¼]\n${counselingData.category}\n\n`;
            content += `[ì„ íƒí•œ ê°ì •]\n${counselingData.emotion}\n\n`;
            content += `[ê³ ë¯¼ ìƒí™©]\n${counselingData.worry}\n\n`;
            
            content += `[ABC ë¶„ì„]\n`;
            content += `A (ì‚¬ì‹¤): ${counselingData.abc.fact}\n`;
            content += `B (ìƒê°): ${counselingData.abc.belief}\n`;
            content += `C (ê²°ê³¼): ${counselingData.abc.consequence}\n\n`;
            
            content += `[í•™ìƒì˜ ì¡°ì–¸]\n`;
            content += `ìƒê°í•´ë³¼ ì :\n${counselingData.advice.thinking}\n\n`;
            content += `ì‹œë„í•´ë³¼ ë°©ë²•:\n${counselingData.advice.help}\n\n`;
            
            content += `[ê²©ë ¤ ë©”ì‹œì§€]\n${counselingData.encouragement}\n\n`;
            content += `[ê°œì¸ ë©”ì‹œì§€]\n${counselingData.personalMessage}\n\n`;
            
            content += `[ìš°ë¦¬ì˜ ì•½ì†]\n`;
            counselingData.commitments.forEach((commitment, index) => {
                content += `${index + 1}. ${commitment}\n`;
            });
            
            content += `\n==========================================\n`;
            content += `Made with â¤ï¸ by ABC êµì‚¬ ìƒë‹´ ë„êµ¬\n`;
            content += `êµì‚¬ì™€ í•™ìƒì´ ì„œë¡œì˜ ë§ˆìŒì„ ì´í•´í•˜ëŠ” ë”°ëœ»í•œ êµì‹¤ì„ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤`;
            
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `ABCìƒë‹´ê²°ê³¼_${counselingData.studentName}_${date}.txt`;
            link.click();
            URL.revokeObjectURL(url);
            
            showNotification('ğŸ“ í…ìŠ¤íŠ¸ íŒŒì¼ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // í¼ ë¦¬ì…‹
        function resetForm() {
            if (confirm('ìƒˆë¡œìš´ ìƒë‹´ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                showNotification('ğŸ”„ ìƒˆë¡œìš´ ìƒë‹´ì„ ì‹œì‘í•©ë‹ˆë‹¤!');
                // ì‹¤ì œë¡œëŠ” ì²« ë²ˆì§¸ ë‹¨ê³„ë¡œ ì´ë™í•˜ëŠ” ë¡œì§ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤
            }
        }

        // ë„ì›€ë§
        function showHelp() {
            alert(`ABC êµì‚¬ ìƒë‹´ ë„êµ¬ ì‚¬ìš©ë²•:\n\nğŸ¨ ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤:\nâ€¢ ğŸ“· ì´ë¯¸ì§€ë¡œ ì €ì¥ - ì˜ˆìœ ì¹´ë“œ í˜•íƒœë¡œ PNG íŒŒì¼ ì €ì¥\nâ€¢ ğŸ“„ PDFë¡œ ì €ì¥ - A4 ì‚¬ì´ì¦ˆë¡œ ì „ë¬¸ì ì¸ PDF ìƒì„±\nâ€¢ ğŸ–¨ï¸ ì¸ì‡„í•˜ê¸° - ì¸ì‡„ ìµœì í™”ëœ ìŠ¤íƒ€ì¼ë¡œ ì¶œë ¥\nâ€¢ ğŸ“ í…ìŠ¤íŠ¸ë¡œ ì €ì¥ - ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬ëœ í…ìŠ¤íŠ¸ íŒŒì¼\n\nğŸ’¡ ìƒë‹´ ê²°ê³¼ë¥¼ ë‹¤ì–‘í•œ í˜•íƒœë¡œ ì €ì¥í•˜ì—¬\n   êµì‹¤ì´ë‚˜ ê°€ì •ì—ì„œ í™œìš©í•´ë³´ì„¸ìš”!`);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë‚ ì§œ ì„¤ì •
        window.onload = function() {
            const now = new Date();
            const dateString = now.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('resultDate').textContent = dateString;
        };
    </script>
</body>
</html>